---
title: Day 19 - Mastering Framer Motion
---

# Day 19 - Mastering Framer Motion

<Tabs id="day-19">

<Tab label="Preview">

<ComponentPreview name="framer-motion-day-19" />

</Tab>

<Tab label="Code">

<Files id="day-19">

<File label="index.tsx">

```tsx showLineNumbers
"use client";

import React, { type ChangeEvent, useEffect, useState } from "react";
import { FaPlus } from "react-icons/fa6";
import EachList from "./each-list";

export interface ValuesTypes {
  id: number;
  name: string;
  icon: string;
}

const images = [
  "https://cdn.jim-nielsen.com/macos/256/finder-2021-09-10.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/siri-2021-09-10.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/keynote-2021-11-15.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/source-files-git-storage-2023-11-21.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/simulator-2022-11-09.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/raycast-2023-02-14.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/taska-for-github-gitlab-issues-2024-04-24.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/folder-colorizer-pro-2023-11-02.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/telegram-2021-07-12.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/preview-2021-05-28.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/github-desktop-2021-05-20.png?rf=1024",
  "https://cdn.jim-nielsen.com/macos/256/figma-2021-05-05.png?rf=1024",
];

function generateMeaningfulDummyText(): string {
  const words = [
    "quick",
    "brown",
    "fox",
    "jumps",
    "over",
    "lazy",
    "dog",
    "bright",
    "sun",
    "shines",
    "on",
    "clear",
    "day",
    "happy",
    "children",
    "play",
    "in",
    "green",
    "field",
    "gentle",
    "breeze",
    "rustles",
    "through",
    "tall",
    "trees",
    "colorful",
    "flowers",
    "bloom",
    "during",
    "spring",
    "season",
    "birds",
    "sing",
    "beautiful",
    "songs",
    "under",
    "blue",
    "sky",
  ];

  const getRandomWord = () => words[Math.floor(Math.random() * words.length)];

  return `${getRandomWord()}`;
}

export default function Day19() {
  const [formFocus, setFormFocus] = useState(false);

  const [values, setValues] = useState<ValuesTypes[]>([
    {
      id: 1,
      name: generateMeaningfulDummyText(),
      icon: images[0],
    },
    {
      id: 2,
      name: generateMeaningfulDummyText(),
      icon: images[1],
    },
    {
      id: 3,
      name: generateMeaningfulDummyText(),
      icon: images[2],
    },
  ]);

  const [selectedValue, setSelectedValue] = useState(1);

  useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      const currentIndex = values.findIndex(
        (value) => value.id === selectedValue
      );
      if (event.key === "ArrowDown") {
        const nextIndex = (currentIndex + 1) % values.length;
        setSelectedValue(values[nextIndex].id);
      } else if (event.key === "ArrowUp") {
        const prevIndex = (currentIndex - 1 + values.length) % values.length;
        setSelectedValue(values[prevIndex].id);
      }
    };

    window.addEventListener("keydown", handleKeyDown);

    return () => {
      window.removeEventListener("keydown", handleKeyDown);
    };
  }, [values, selectedValue]);

  const onSubmit = (event: ChangeEvent<HTMLFormElement>) => {
    event.preventDefault();

    const form = event.target as HTMLFormElement;
    const input = form.elements[0] as HTMLInputElement;
    const { value } = input;

    const newValues = [...values];

    newValues.push({
      id: Math.floor(Math.random() * 1000000),
      name: value,
      icon: images[Math.floor(Math.random() * 11)],
    });

    setValues(newValues);
    form.reset();
    input.blur();
  };

  return (
    <div className="h-[600px] w-full max-w-4xl px-8">
      <form onSubmit={onSubmit}>
        <label className="flex w-full items-center gap-2 rounded-lg border p-3 text-[#525252] ring-2 ring-transparent ring-offset-2 duration-100 focus-within:ring-[#939393]">
          <FaPlus className="text-[#939393]" />
          <input
            type="text"
            placeholder="insert a plain text"
            className="outline-none placeholder:text-[#939393]"
            onFocus={() => setFormFocus(true)}
            onBlur={() => setFormFocus(false)}
          />
        </label>
      </form>

      <div className="mt-8">
        <header className="flex justify-between border-b py-4 text-[#939393]">
          <h3>Title</h3>
          <p>Created at</p>
        </header>

        <ul className="mt-2">
          {values.map((value) => (
            <EachList
              key={value.id}
              value={value}
              selectedValue={selectedValue}
              formFocus={formFocus}
            />
          ))}
        </ul>
      </div>
    </div>
  );
}
```

</File>

<File label="each-list.tsx">

```tsx showLineNumbers
import React, { useEffect, useState } from "react";
import { type ValuesTypes } from ".";
import { AnimatePresence, motion } from "framer-motion";

import { FaCheck } from "react-icons/fa6";

interface Props {
  value: ValuesTypes;
  selectedValue: number;
  formFocus: boolean;
}

export default function EachList({ value, selectedValue, formFocus }: Props) {
  const [isCopy, setIsCopy] = useState(false);

  useEffect(() => {
    const handleEnterDown = (event: KeyboardEvent) => {
      if (
        value.id === selectedValue &&
        event.key === "Enter" &&
        !isCopy &&
        !formFocus
      ) {
        setIsCopy(true);

        setTimeout(() => setIsCopy(false), 1200);
      }
    };

    window.addEventListener("keydown", handleEnterDown);

    return () => {
      window.removeEventListener("keydown", handleEnterDown);
    };
  }, [selectedValue, isCopy, formFocus]);

  return (
    <li
      key={value.id}
      className="relative isolate flex h-[40px] items-center gap-2 text-sm"
    >
      {value.id === selectedValue && (
        <div className="absolute -inset-x-4 inset-y-0 -z-10 rounded-lg bg-[#ECECEC]" />
      )}
      <AnimatePresence mode="popLayout" initial={false}>
        {!isCopy ? (
          <div key={"not-copy"} className="flex grow items-center gap-2">
            <motion.img
              initial={{ opacity: 0 }}
              animate={{
                opacity: 1,
                transition: { delay: 0.3, duration: 0.1 },
              }}
              exit={{ opacity: 0 }}
              src={value.icon}
              className="w-6"
            />
            <motion.h4
              initial={{ opacity: 0, scale: 0.98 }}
              animate={{
                opacity: 1,
                scale: 1,
                transition: { delay: 0.3, duration: 0.1 },
              }}
              exit={{ opacity: 0, scale: 0.98 }}
              className="grow origin-left"
            >
              {value.name}
            </motion.h4>
          </div>
        ) : (
          <div key={"copy"} className="flex grow items-center gap-2">
            <motion.span
              initial={{ opacity: 0, scale: 0.1 }}
              animate={{
                opacity: 1,
                scale: 1,
                transition: { delay: 0.3, duration: 0.1 },
              }}
              exit={{ opacity: 0, scale: 0.1 }}
              className="flex w-6 items-center justify-center"
            >
              <FaCheck />
            </motion.span>
            <motion.h4
              initial={{ opacity: 0 }}
              animate={{
                opacity: 1,
                transition: { delay: 0.3, duration: 0.1 },
              }}
              exit={{ opacity: 0 }}
              className="grow"
            >
              Copied
            </motion.h4>
          </div>
        )}
      </AnimatePresence>

      {value.id === selectedValue ? (
        <div className="rounded-md bg-[#E2E2E2] px-2 py-1 text-[#787878]">
          Enter
        </div>
      ) : (
        <p>15 hours ago</p>
      )}
    </li>
  );
}
```

</File>

</Files>

</Tab>

</Tabs>
